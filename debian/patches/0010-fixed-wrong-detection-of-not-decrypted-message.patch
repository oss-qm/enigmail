From: Patrick Brunschwig <patrick@enigmail.net>
Date: Thu, 29 Mar 2018 17:25:52 +0200
Subject: fixed wrong detection of not decrypted message

(cherry picked from commit 2a387658c815db0e42c86ad27c128cb28f80bb51)
---
 package/mimeDecrypt.jsm | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/package/mimeDecrypt.jsm b/package/mimeDecrypt.jsm
index 89f17e9..535de7c 100644
--- a/package/mimeDecrypt.jsm
+++ b/package/mimeDecrypt.jsm
@@ -425,7 +425,7 @@ MimeDecryptHandler.prototype = {
         this.returnStatus);
 
       if ((this.returnStatus.statusFlags & EnigmailConstants.DECRYPTION_FAILED) ||
-        (this.returnStatus.statusFlags & EnigmailConstants.NO_SECKEY)) {
+        !(this.returnStatus.statusFlags & EnigmailConstants.DECRYPTION_OKAY)) {
         this.decryptedData = "";
       }
 
