From: Patrick Brunschwig <patrick@enigmail.net>
Date: Wed, 28 Mar 2018 12:53:56 +0200
Subject: resolve symlinks for testing if GNUPGHOMDIR is accessible (bug 774)

(cherry picked from commit d041672f2c7d50f5b4c2b828c3d952b491945a2c)
---
 package/gpgAgent.jsm | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/package/gpgAgent.jsm b/package/gpgAgent.jsm
index 5d074df..75ec78c 100644
--- a/package/gpgAgent.jsm
+++ b/package/gpgAgent.jsm
@@ -727,6 +727,8 @@ var EnigmailGpgAgent = {
     let homeDirObj = Components.classes[NS_LOCAL_FILE_CONTRACTID].createInstance(Ci.nsIFile);
     EnigmailFiles.initPath(homeDirObj, homeDir);
 
+    homeDirObj.normalize(); // resolve symlinks etc.
+
     let dirType = EnigmailFiles.ensureWritableDirectory(homeDirObj, 0x1C0); // 0700
     let errMsg = "";
     switch (dirType) {
