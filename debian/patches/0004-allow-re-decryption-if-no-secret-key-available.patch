From: Patrick Brunschwig <patrick@enigmail.net>
Date: Tue, 27 Mar 2018 17:24:51 +0200
Subject: allow re-decryption if no secret key available

(cherry picked from commit b4d0d1766c6e516f91fcd7242689f2ef73cb3f42)
---
 package/mimeDecrypt.jsm | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/package/mimeDecrypt.jsm b/package/mimeDecrypt.jsm
index dcbb936..89f17e9 100644
--- a/package/mimeDecrypt.jsm
+++ b/package/mimeDecrypt.jsm
@@ -424,7 +424,8 @@ MimeDecryptHandler.prototype = {
         EnigmailConstants.UI_PGP_MIME,
         this.returnStatus);
 
-      if (this.returnStatus.statusFlags & EnigmailConstants.DECRYPTION_FAILED) {
+      if ((this.returnStatus.statusFlags & EnigmailConstants.DECRYPTION_FAILED) ||
+        (this.returnStatus.statusFlags & EnigmailConstants.NO_SECKEY)) {
         this.decryptedData = "";
       }
 
