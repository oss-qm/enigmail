From: Patrick Brunschwig <patrick@enigmail.net>
Date: Sun, 15 May 2016 19:10:45 +0200
Subject: fixed bug 609 (exception instead of error message if key not found)

---
 package/encryption.jsm | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/package/encryption.jsm b/package/encryption.jsm
index 52797ed..2830464 100644
--- a/package/encryption.jsm
+++ b/package/encryption.jsm
@@ -207,7 +207,7 @@ const EnigmailEncryption = {
 
     if (encrypt) {
       keyList = keyList.reduce(function _f(p, keyObj) {
-        if (keyObj.getEncryptionValidity().keyValid) p.push(keyObj);
+        if (keyObj && keyObj.getEncryptionValidity().keyValid) p.push(keyObj);
         return p;
       }, []);
     }
